meta {
  name: Create Root CA Certificate for NGINX cert validation
  type: http
  seq: 3
}

post {
  url: {{basename}}/api/config/namespaces/{{namespace}}/trusted_ca_lists
  body: json
  auth: none
}

body:json {
  {
    "metadata": {
      "name": "seg-nginx-appcert-auto",
      "description": "Certificate served by the NGINX application to the load balancer",
      "disable": false
    },
    "spec": {
      "trusted_ca_url": "string:///LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUVJekNDQXd1Z0F3SUJBZ0lVQ1FwclNrdHE4dEl1dXZvNS9HbXM2TTRaYXdjd0RRWUpLb1pJaHZjTkFRRUwKQlFBd2dhQXhDekFKQmdOVkJBWVRBa05JTVEwd0N3WURWUVFJREFSV1lYVmtNUkV3RHdZRFZRUUhEQWhNWVhWegpZVzV1WlRFYU1CZ0dBMVVFQ2d3UlJTMTRjR1Z5ZENCVGIyeDFkR2x2Ym5NeEpqQWtCZ05WQkFNTUhYUmtaVzVuCmFXNTRMbVV0ZUhCbGNuUnpiMngxZEdsdmJuTXViR0Z1TVNzd0tRWUpLb1pJaHZjTkFRa0JGaHgwWkdWdGIyNTAKUUdVdGVIQmxjblJ6YjJ4MWRHbHZibk11WTI5dE1CNFhEVEkwTURVeE56QTRNakV5TlZvWERUSTFNRFV4TnpBNApNakV5TlZvd2dhQXhDekFKQmdOVkJBWVRBa05JTVEwd0N3WURWUVFJREFSV1lYVmtNUkV3RHdZRFZRUUhEQWhNCllYVnpZVzV1WlRFYU1CZ0dBMVVFQ2d3UlJTMTRjR1Z5ZENCVGIyeDFkR2x2Ym5NeEpqQWtCZ05WQkFNTUhYUmsKWlc1bmFXNTRMbVV0ZUhCbGNuUnpiMngxZEdsdmJuTXViR0Z1TVNzd0tRWUpLb1pJaHZjTkFRa0JGaHgwWkdWdApiMjUwUUdVdGVIQmxjblJ6YjJ4MWRHbHZibk11WTI5dE1JSUJJakFOQmdrcWhraUc5dzBCQVFFRkFBT0NBUThBCk1JSUJDZ0tDQVFFQTJYQTVCOXZ2MFltU2ZUUit1VzJIM2VNelVxMTVqSjZ4K25mZVZKNUJnYU56Q1huNHZ0S0sKazZDMDBucUpqdDFXaWVuaDBTQ0JMcUJMbDZMS2RMemhhQm9zU0RTaHVOMkRlUy9CR2pEQ21Ba2NiTjJ0aldIVApzbUxNL3pOYlhDSUd3NFFzVWsxbUNaV3lPeFFwVUtIeDBWL1lBSERWa09CTXg0UVFKWE9zM1BzaGh4VkZsWWYzCit6MjludnpPVVdCSEZDVlphZjJzSWJjVnkzL1hlWnBoem1IRE1IMkx3NjRGSDZYRTJXVHlVVnNzczlpUDdBWUQKM1V2VmFJUWlXNzdHTmprUmRnVUhsaUJIQjJYMUNjU3hLOG44am5UK09CL3UyV0FYbHYwM042Q2VlUHdVMnQ0ZwpaMzY2clU0UXkvNmJHZUg2R1ZhWDJ2YjJvbU0raklmL3Z3SURBUUFCbzFNd1VUQWRCZ05WSFE0RUZnUVU5SGZkCmNEVktXUjVkb0FlUjdHeTZMT2JORUZvd0h3WURWUjBqQkJnd0ZvQVU5SGZkY0RWS1dSNWRvQWVSN0d5NkxPYk4KRUZvd0R3WURWUjBUQVFIL0JBVXdBd0VCL3pBTkJna3Foa2lHOXcwQkFRc0ZBQU9DQVFFQWovZm1PM0JZQjVVNwpWb2V0azlxWis0Y2VCUEFpQWlwZ202Rmh4QU5ycVFSdys5aXQ4NjZhTGNQcTBUMFUrTlRqUk9ubTNuT0xSZGZGCjF3bGpEWTVvOVdQSEFIWHVxVDJJazhmSVdFTTF0Z1FpL2EzajF5YTFuaWM0VXorNzY1VVVaemR6dHdJZ3FYa3oKdHo2Zk80N1IycXR6c2Y1WVdzaDRqWlFrTXVqRXZEUkMwajlHUkFteW5rWk9Nc09IeVE3ZEhNd3lOeTFMTXp6ZQpCYkVjYUc1cWxocVcvQTJxY05YOUYxOWNmUmxyMElldHZXZlFoQnBHNEJzL2lwVHVXUGdNTHB6UEdRT0hWOU1QCjZFK2hGQlhubW5sYkYxMmRCNHpzazMrYy9VdVR3MStYNFZ0bVZiZmJuSVFUdWk0eEJPc3BGZ1ZjdUhZbzdnRmcKRnlVSlpCemRIdz09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0="
    }
  }
}
